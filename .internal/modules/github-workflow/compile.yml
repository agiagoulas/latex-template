name: Compile LaTeX PDF
on: [push]
jobs:
  compile:

    name: Compile LaTeX to PDF
    runs-on: ubuntu-latest
    container: aergus/latex

    steps:
      - name: Checkout the repository code
        uses: actions/checkout@v1

      - name: Create output directory
        run: mkdir -p ./output

      - name: Compile the master file
        run: shell_escape=t latexmk -pdf -jobname=./output/build master.tex;

      - name: Copy compiled output pdf
        run: cp output/build.pdf master.pdf

      - name: Upload compiled pdf file as artifact
        uses: actions/upload-artifact@v1
        with:
          name: master
          path: master.pdf
